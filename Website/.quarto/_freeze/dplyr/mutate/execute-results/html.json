{
  "hash": "7487a573342d706491200e65dfd5fa2a",
  "result": {
    "markdown": "---\ntitle: \"Mutate\"\n---\n\n\n<center>\n![](images/dplyr_mutate.png){style=\"width:200px\"}\n</center>\n\nThe function `dplyr::mutate()` allows you to:\n\n- Create new columns based on existing columns.\n- Modify existing columns\n- Delete columns\n\n[Tidyverse reference page](https://dplyr.tidyverse.org//reference/mutate.html)\n\n## Dataset\n\nFor demonstration we'll load the `mammal_sleep_tbl` data from the [mgrtibbles package](/datasets/mgrtibbles.qmd) (hyperlink includes install instructions).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load package\nlibrary(\"mgrtibbles\")\n#mammal_sleep_tbl tibble for demonstration\nmgrtibbles::mammal_sleep_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 62 × 11\n   species          body_wt brain_wt non_dreaming dreaming total_sleep life_span\n   <chr>              <dbl>    <dbl>        <dbl>    <dbl>       <dbl>     <dbl>\n 1 Africanelephant  6.65e+3   5.71           NA       NA           3.3      38.6\n 2 Africangiantpou… 1   e+0   0.0066          6.3      2           8.3       4.5\n 3 ArcticFox        3.38e+0   0.0445         NA       NA          12.5      14  \n 4 Arcticgroundsqu… 9.2 e-1   0.0057         NA       NA          16.5      NA  \n 5 Asianelephant    2.55e+3   4.60            2.1      1.8         3.9      69  \n 6 Baboon           1.06e+1   0.180           9.1      0.7         9.8      27  \n 7 Bigbrownbat      2.3 e-2   0.0003         15.8      3.9        19.7      19  \n 8 Braziliantapir   1.6 e+2   0.169           5.2      1           6.2      30.4\n 9 Cat              3.3 e+0   0.0256         10.9      3.6        14.5      28  \n10 Chimpanzee       5.22e+1   0.44            8.3      1.4         9.7      50  \n# ℹ 52 more rows\n# ℹ 4 more variables: gestation <dbl>, predation <fct>, exposure <fct>,\n#   danger <fct>\n```\n:::\n:::\n\n\n## Create new column\n\nCreate a column of brain and body weight ratio.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |>\n    #Select columns of interest\n    dplyr::select(species, body_wt, brain_wt) |>\n    #Calculate and add brain_body_wt_ratio column\n    dplyr::mutate(brain_body_wt_ratio = brain_wt/(body_wt*1000))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 62 × 4\n   species                 body_wt brain_wt brain_body_wt_ratio\n   <chr>                     <dbl>    <dbl>               <dbl>\n 1 Africanelephant        6654       5.71           0.000000858\n 2 Africangiantpouchedrat    1       0.0066         0.0000066  \n 3 ArcticFox                 3.38    0.0445         0.0000131  \n 4 Arcticgroundsquirrel      0.92    0.0057         0.00000620 \n 5 Asianelephant          2547       4.60           0.00000181 \n 6 Baboon                   10.6     0.180          0.0000170  \n 7 Bigbrownbat               0.023   0.0003         0.0000130  \n 8 Braziliantapir          160       0.169          0.00000106 \n 9 Cat                       3.3     0.0256         0.00000776 \n10 Chimpanzee               52.2     0.44           0.00000844 \n# ℹ 52 more rows\n```\n:::\n:::\n\n\nCreate a column for life time sleep\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |>\n    #Select columns of interest\n    dplyr::select(species, total_sleep, life_span) |>\n    #Calculate and add total_life_sleep column\n    dplyr::mutate(total_life_sleep = (life_span*365.25) * total_sleep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 62 × 4\n   species                total_sleep life_span total_life_sleep\n   <chr>                        <dbl>     <dbl>            <dbl>\n 1 Africanelephant                3.3      38.6           46526.\n 2 Africangiantpouchedrat         8.3       4.5           13642.\n 3 ArcticFox                     12.5      14             63919.\n 4 Arcticgroundsquirrel          16.5      NA                NA \n 5 Asianelephant                  3.9      69             98289.\n 6 Baboon                         9.8      27             96645.\n 7 Bigbrownbat                   19.7      19            136713.\n 8 Braziliantapir                 6.2      30.4           68842.\n 9 Cat                           14.5      28            148292.\n10 Chimpanzee                     9.7      50            177146.\n# ℹ 52 more rows\n```\n:::\n:::\n\n\n## NA filling\n\nFor NA filling/editing please see the [tidyr NA filling page](/tidyr/na_filling.qmd).",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}