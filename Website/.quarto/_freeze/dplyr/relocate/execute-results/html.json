{
  "hash": "c49066347d518d132d607615f5d137c0",
  "result": {
    "markdown": "---\ntitle: \"Relocate\"\n---\n\n\n<center>\n![](images/dplyr_relocate.png){style=\"width:200px\"}\n</center>\n\nThe function `dplyr::relocate()` can change the order of columns.\n\n\n::: {.cell}\n\n:::\n\n\n[Tidyverse reference page](https://dplyr.tidyverse.org//reference/relocate.html)\n\n## Dataset\n\nFor demonstration we'll load the `mammal_sleep_tbl` data from the [mgrtibbles package](/datasets/mgrtibbles.qmd) (hyperlink includes install instructions). For easier viewing we'll subset it so it only has 5 rows.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load package\nlibrary(\"mgrtibbles\")\n#mammal_sleep_tbl tibble for demonstration\nmammal_sleep_tbl<- mgrtibbles::mammal_sleep_tbl |> \n    #Slice to extract rows 1:5\n    dplyr::slice(1:5)\nmammal_sleep_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  species body_wt brain_wt non_dreaming dreaming total_sleep life_span gestation\n  <chr>     <dbl>    <dbl>        <dbl>    <dbl>       <dbl>     <dbl>     <dbl>\n1 Africa… 6654      5.71           NA       NA           3.3      38.6       645\n2 Africa…    1      0.0066          6.3      2           8.3       4.5        42\n3 Arctic…    3.38   0.0445         NA       NA          12.5      14          60\n4 Arctic…    0.92   0.0057         NA       NA          16.5      NA          25\n5 Asiane… 2547      4.60            2.1      1.8         3.9      69         624\n# ℹ 3 more variables: predation <fct>, exposure <fct>, danger <fct>\n```\n:::\n:::\n\n\n## Relocate to first column\n\nRelocating a column to the first column is the default behaviour of `dplyr::relocate()`\n\nRelocate column \"body_wt\" to first column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> dplyr::relocate(body_wt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  body_wt species brain_wt non_dreaming dreaming total_sleep life_span gestation\n    <dbl> <chr>      <dbl>        <dbl>    <dbl>       <dbl>     <dbl>     <dbl>\n1 6654    Africa…   5.71           NA       NA           3.3      38.6       645\n2    1    Africa…   0.0066          6.3      2           8.3       4.5        42\n3    3.38 Arctic…   0.0445         NA       NA          12.5      14          60\n4    0.92 Arctic…   0.0057         NA       NA          16.5      NA          25\n5 2547    Asiane…   4.60            2.1      1.8         3.9      69         624\n# ℹ 3 more variables: predation <fct>, exposure <fct>, danger <fct>\n```\n:::\n:::\n\n\n## Relocate after another column\n\nRelocate the __body_wt__ column after the __brain_wt__ column with the `.after=` option.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> dplyr::relocate(body_wt, .after=brain_wt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  species brain_wt body_wt non_dreaming dreaming total_sleep life_span gestation\n  <chr>      <dbl>   <dbl>        <dbl>    <dbl>       <dbl>     <dbl>     <dbl>\n1 Africa…   5.71   6654            NA       NA           3.3      38.6       645\n2 Africa…   0.0066    1             6.3      2           8.3       4.5        42\n3 Arctic…   0.0445    3.38         NA       NA          12.5      14          60\n4 Arctic…   0.0057    0.92         NA       NA          16.5      NA          25\n5 Asiane…   4.60   2547             2.1      1.8         3.9      69         624\n# ℹ 3 more variables: predation <fct>, exposure <fct>, danger <fct>\n```\n:::\n:::\n\n\n## Relocate before another column\n\nRelocate the __dreaming__ column before the __non_dreaming__ column with the `.before=` option.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> dplyr::relocate(dreaming, .before=non_dreaming)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  species body_wt brain_wt dreaming non_dreaming total_sleep life_span gestation\n  <chr>     <dbl>    <dbl>    <dbl>        <dbl>       <dbl>     <dbl>     <dbl>\n1 Africa… 6654      5.71       NA           NA           3.3      38.6       645\n2 Africa…    1      0.0066      2            6.3         8.3       4.5        42\n3 Arctic…    3.38   0.0445     NA           NA          12.5      14          60\n4 Arctic…    0.92   0.0057     NA           NA          16.5      NA          25\n5 Asiane… 2547      4.60        1.8          2.1         3.9      69         624\n# ℹ 3 more variables: predation <fct>, exposure <fct>, danger <fct>\n```\n:::\n:::\n\n\n## Relocate a column to the last column\n\nUse the `last_col()` helper function as the `.after()` option to move the __predation__ column to the last column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> \n    #Select columns predation to danger\n    dplyr::select(predation:danger) |>\n    #Relocate predation to last column\n    dplyr::relocate(predation, .after=last_col())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n  exposure danger predation\n  <fct>    <fct>  <fct>    \n1 5        3      3        \n2 1        3      3        \n3 1        1      1        \n4 2        3      5        \n5 5        4      3        \n```\n:::\n:::\n\n\n## Relocate all columns of a certain data type\n\nRelocate all numeric (integer and floats) columns to start of __tibble__.\nThis utilises the `where()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> dplyr::relocate(where(is.numeric))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  body_wt brain_wt non_dreaming dreaming total_sleep life_span gestation species\n    <dbl>    <dbl>        <dbl>    <dbl>       <dbl>     <dbl>     <dbl> <chr>  \n1 6654      5.71           NA       NA           3.3      38.6       645 Africa…\n2    1      0.0066          6.3      2           8.3       4.5        42 Africa…\n3    3.38   0.0445         NA       NA          12.5      14          60 Arctic…\n4    0.92   0.0057         NA       NA          16.5      NA          25 Arctic…\n5 2547      4.60            2.1      1.8         3.9      69         624 Asiane…\n# ℹ 3 more variables: predation <fct>, exposure <fct>, danger <fct>\n```\n:::\n:::\n\n\nRelocate all factor columns after the species column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> dplyr::relocate(where(is.factor), .after=species)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 11\n  species       predation exposure danger body_wt brain_wt non_dreaming dreaming\n  <chr>         <fct>     <fct>    <fct>    <dbl>    <dbl>        <dbl>    <dbl>\n1 Africaneleph… 3         5        3      6654      5.71           NA       NA  \n2 Africangiant… 3         1        3         1      0.0066          6.3      2  \n3 ArcticFox     1         1        1         3.38   0.0445         NA       NA  \n4 Arcticground… 5         2        3         0.92   0.0057         NA       NA  \n5 Asianelephant 3         5        4      2547      4.60            2.1      1.8\n# ℹ 3 more variables: total_sleep <dbl>, life_span <dbl>, gestation <dbl>\n```\n:::\n:::\n\n\nRelocate all character (string) columns to the end.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmammal_sleep_tbl |> \n    #Relocate string columns to end\n    dplyr::relocate(where(is.character), .after=last_col()) |>\n    #Select last five columns\n    dplyr::select(last_col(4):last_col())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 5\n  gestation predation exposure danger species               \n      <dbl> <fct>     <fct>    <fct>  <chr>                 \n1       645 3         5        3      Africanelephant       \n2        42 3         1        3      Africangiantpouchedrat\n3        60 1         1        1      ArcticFox             \n4        25 5         2        3      Arcticgroundsquirrel  \n5       624 3         5        4      Asianelephant         \n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}