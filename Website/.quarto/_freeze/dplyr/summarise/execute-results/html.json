{
  "hash": "4075d1427d6896a2c2108b09b9c70c4d",
  "result": {
    "markdown": "---\ntitle: \"Summarise\"\n---\n\n\n<center>\n![](images/dplyr_summarise.png){style=\"width:200px\"}\n</center>\n\nThe function `summarise()` allows you to get a summary of the unique values within a grouped __tibble__.\nIt will produce a __tibble_ of the summarised information.\n\nVarious helper functions can be used to get specific info including:\n\n- `n()`: Count number of instances of group.\n- `mean()`: Calculate means of a columns.\n- `median()`: Calculate median of columns.\n- `sd()`: Calculate standard deviation.\n- `IQR()`: Calculate interquartile range. iqr = upper quartile - lower quartile\n- `first()`: Extract first value.\n- `last()`: Extract last value.\n- `nth()`: Extract specified nth value.\n\n[Tidyverse reference page](https://dplyr.tidyverse.org//reference/summarise.html)\n\n\n::: {.cell}\n\n:::\n\n\n## Dataset\n\nFor demonstration we'll load the `amphibian_div_tbl` data from the [mgrtibbles package](/datasets/mgrtibbles.qmd) (hyperlink includes install instructions). \n\nWe'll remove any rows with NAs as NAs cause mean and other other calculations to return NA.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load package\nlibrary(\"mgrtibbles\")\n#amphibian_div_tbl tibble for demonstration\namphibian_div_tbl <- mgrtibbles::amphibian_div_tbl |> na.omit()\n```\n:::\n\n\n## Summarise\n\nThe default of `summarise()` is to produce a __tibble__ of unique group values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |> \n    dplyr::group_by(IUCN.Red.List.Status) |>\n    dplyr::summarise()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 1\n  IUCN.Red.List.Status            \n  <fct>                           \n1 Least Concern (LC)              \n2 Near Threatened (NT)            \n3 Vulnerable (VU)                 \n4 Endangered (EN)                 \n5 Least Concern (LC) - Provisional\n```\n:::\n:::\n\n\n## Count\n\nThe counts of each unique value can be added with `n()`. \n\nNotice that the new column's name is specified before the `=` sign. This is the same as the [`count()`](/dplyr/count.qmd) function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |> \n    dplyr::group_by(IUCN.Red.List.Status) |>\n    dplyr::summarise(n = n())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  IUCN.Red.List.Status                 n\n  <fct>                            <int>\n1 Least Concern (LC)                  55\n2 Near Threatened (NT)                 5\n3 Vulnerable (VU)                      3\n4 Endangered (EN)                      1\n5 Least Concern (LC) - Provisional     1\n```\n:::\n:::\n\n\n## Mean and median\n\nThe `mean()` function can be used to calculate the mean of groups and specified columns/variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |>\n    #Group by IUCN.Red.List.Status\n    dplyr::group_by(IUCN.Red.List.Status) |>\n    #Summarise\n    dplyr::summarise(n = n(), \n                    mean_body_size = mean(Body_size_mm), \n                    mean_max_litter_size = mean(Litter_size_max_n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n  IUCN.Red.List.Status                 n mean_body_size mean_max_litter_size\n  <fct>                            <int>          <dbl>                <dbl>\n1 Least Concern (LC)                  55           173.                2570.\n2 Near Threatened (NT)                 5           114.                 369.\n3 Vulnerable (VU)                      3           133                   19 \n4 Endangered (EN)                      1            87                  350 \n5 Least Concern (LC) - Provisional     1            48                 1012 \n```\n:::\n:::\n\n\nThe `median()` function calculates medians.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |>\n    #Group by IUCN.Red.List.Status\n    dplyr::group_by(IUCN.Red.List.Status) |>\n    #Summarise\n    dplyr::summarise(n = n(), \n                    mean_body_size = mean(Body_size_mm),\n                    median_body_size = median(Body_size_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n  IUCN.Red.List.Status                 n mean_body_size median_body_size\n  <fct>                            <int>          <dbl>            <dbl>\n1 Least Concern (LC)                  55           173.              127\n2 Near Threatened (NT)                 5           114.              111\n3 Vulnerable (VU)                      3           133               170\n4 Endangered (EN)                      1            87                87\n5 Least Concern (LC) - Provisional     1            48                48\n```\n:::\n:::\n\n\n## Standard deviation and IQR\n\nThe `sd()` and `IQR()` function calculate standard deviation and inter quartile range (upper quartile - lower quartile).\n\nNote NAs are provided for standard deviation and 0 for IQR if there is only one value in the group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |>\n    #Group by IUCN.Red.List.Status\n    dplyr::group_by(IUCN.Red.List.Status) |>\n    #Summarise\n    dplyr::summarise(n = n(),\n                    sd_body_size = sd(Body_size_mm),\n                    iqr_body_size = IQR(Body_size_mm),\n                    )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n  IUCN.Red.List.Status                 n sd_body_size iqr_body_size\n  <fct>                            <int>        <dbl>         <dbl>\n1 Least Concern (LC)                  55        200.           94.5\n2 Near Threatened (NT)                 5         51.7          83  \n3 Vulnerable (VU)                      3         71.1          63.5\n4 Endangered (EN)                      1         NA             0  \n5 Least Concern (LC) - Provisional     1         NA             0  \n```\n:::\n:::\n\n\n## First, last and nth values\n\nThe first, last, and nth value can be extracted with the function `first()`, `last()`, and `nth()`.\n\nNote NAs are provided for `nth()` as there is only one value. `first()` and `last()` work as the single value is the first and last value.\n\n\n::: {.cell}\n\n```{.r .cell-code}\namphibian_div_tbl |>\n    #Group by IUCN.Red.List.Status\n    dplyr::group_by(IUCN.Red.List.Status) |>\n    #Summarise\n    dplyr::summarise(n = n(),\n                    first_body_size = first(Body_size_mm),\n                    last_body_size = last(Body_size_mm),\n                    second_body_size = nth(Body_size_mm, 2)\n                    )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 5\n  IUCN.Red.List.Status         n first_body_size last_body_size second_body_size\n  <fct>                    <int>           <dbl>          <dbl>            <dbl>\n1 Least Concern (LC)          55              38            197               33\n2 Near Threatened (NT)         5              51             76              111\n3 Vulnerable (VU)              3              51            170              178\n4 Endangered (EN)              1              87             87               NA\n5 Least Concern (LC) - Pr…     1              48             48               NA\n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}