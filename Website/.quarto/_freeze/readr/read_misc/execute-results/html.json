{
  "hash": "37a55fb7f82711b5b0f4070e24d795dd",
  "result": {
    "markdown": "---\ntitle: \"Misc read options\"\n---\n\n\n<center>\n![](images/readr_misc_options.png){style=\"width:200px\"}\n</center>\n\nOn top of choosing the delimiter (`delim=`) and the column types (`col_types=`) there are other useful options for `readr::read_delim()`.\n\nThe three covered here are:\n\n- `id=`: Adds an ID column containing the file path. Useful when reading in multiple files and combining the data into one __tibble__.\n- `skip=`: Skips a specified number of lines from the top of the file. Useful if the top of the file contains information (e.g. annotation) on the data that you don't want included in the __tibble__.\n- `n_max=`: Specify the max number of lines/rows to read into the __tibble__. Useful for only getting a small amount of the data for creating/testing/debugging code.\n\n## File path column\n\nThe `id=` option can be used to add an ID column with the file path of the data. The important features of this are:\n\n- The column's name is specified as a string e.g. `id = \"file_path\"`.\n- The file path column is added as the first column to the resulting __tibble__.\n- The string specified as `file=` is used as the values in the created column.\n- The values of the resulting column are identical.\n\n### ID as file path\n\nRead in the file [https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv](https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv) setting \"file_path\" to `id=`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_delim(\n    file = \"https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv\",\n    delim = \",\",\n    id = \"file_path\") |>\n    #Slice and select the first 5 rows and 6 columns\n    dplyr::slice(1:5) |>  dplyr::select(1:6)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 155 Columns: 34\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): common_name\ndbl (32): id, seeds, drought_tolerant, salt_tolerant, thorny, invasive, trop...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 6\n  file_path                  id common_name seeds drought_tolerant salt_tolerant\n  <chr>                   <dbl> <chr>       <dbl>            <dbl>         <dbl>\n1 https://neof-workshops…   425 flowering-…     0                1             0\n2 https://neof-workshops…   426 flowering-…     0                1             0\n3 https://neof-workshops…   427 flowering-…     0                1             0\n4 https://neof-workshops…   428 flowering-…     0                1             1\n5 https://neof-workshops…   434 Jacob's co…     0                0             0\n```\n:::\n:::\n\n\n### ID as file name\n\nRepeat the above using the functions `dplyr::mutate()` and `basename()` to only contain the file name (i.e. remove the entire file path except the file name).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_delim(\n    file = \"https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv\",\n    delim = \",\",\n    id = \"file_name\") |>\n    #Mutate to only retain file name in the file_name column\n    dplyr::mutate(file_name = basename(file_name)) |>\n    #Slice and select the first 5 rows and 6 columns\n    dplyr::slice(1:5) |>  dplyr::select(1:6)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 155 Columns: 34\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): common_name\ndbl (32): id, seeds, drought_tolerant, salt_tolerant, thorny, invasive, trop...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 6\n  file_name                id common_name   seeds drought_tolerant salt_tolerant\n  <chr>                 <dbl> <chr>         <dbl>            <dbl>         <dbl>\n1 all_plant_details.csv   425 flowering-ma…     0                1             0\n2 all_plant_details.csv   426 flowering-ma…     0                1             0\n3 all_plant_details.csv   427 flowering-ma…     0                1             0\n4 all_plant_details.csv   428 flowering-ma…     0                1             1\n5 all_plant_details.csv   434 Jacob's coat      0                0             0\n```\n:::\n:::\n\n\n## Skip lines\n\nData files may contain information related to the data that is not part of the table at the top of the file. \nThe `skip=` option allows the first X lines to be skipped for these data files.\n\nIf these information lines are not skipped it can confuse the parsing of the data based on the delimiter since the information lines will not have the same amount of the delimiter character as the actual data.\n\n### File contents\n\nCheck the top 8 lines of the file: [https://neof-workshops.github.io/Tidyverse/data/all_plant_details_w_info.csv](https://neof-workshops.github.io/Tidyverse/data/all_plant_details_w_info.csv).\n\nNotice the first three lines are information and not data lines.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadLines(\"https://neof-workshops.github.io/Tidyverse/data/all_plant_details_w_info.csv\", n=8)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Houseplant environment characteristics\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n[2] \"information about indoor plants, with multiple binary and categorical features.\"                                                                                                                                                                                                                                                                                                                                                                                                                                \n[3] \"Source: https://www.kaggle.com/datasets/noneee/houseplant-environment-characteristics\"                                                                                                                                                                                                                                                                                                                                                                                                                          \n[4] \"id,common_name,seeds,drought_tolerant,salt_tolerant,thorny,invasive,tropical,indoor,flowers,cones,fruits,edible_fruit,leaf,edible_leaf,cuisine,medicinal,poisonous_to_humans,poisonous_to_pets,sunlight_part_sun_part_shade,sunlight_full_shade,sunlight_deep_shade,sunlight_part_shade,sunlight_full_sun_only_if_soil_kept_moist,sunlight_full_sun,sunlight_filtered_shade,care_level_encoded,maintenance_encoded,watering_encoded,growth_rate_encoded,cycle_perennial,cycle_herbaceous_perennial,cycle_annual\"\n[5] \"425,flowering-maple,0,1,0,1,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,2,0,2,0,1,0,0\"                                                                                                                                                                                                                                                                                                                                                                                                                              \n[6] \"426,flowering-maple,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0\"                                                                                                                                                                                                                                                                                                                                                                                                                              \n[7] \"427,flowering-maple,0,1,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0\"                                                                                                                                                                                                                                                                                                                                                                                                                              \n[8] \"428,flowering-maple,0,1,1,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,0,2,1,1,0,1,0,0\"                                                                                                                                                                                                                                                                                                                                                                                                                              \n```\n:::\n:::\n\n\n### Read in and skip lines\n\nRead in the data skipping the first 3 lines.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_delim(\n    file = \"https://neof-workshops.github.io/Tidyverse/data/all_plant_details_w_info.csv\",\n    delim = \",\",\n    skip = 3) |>\n    #Slice and select the first 5 rows and 6 columns\n    dplyr::slice(1:5) |>  dplyr::select(1:6)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 155 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): common_name\ndbl (32): id, seeds, drought_tolerant, salt_tolerant, thorny, invasive, trop...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 6\n     id common_name     seeds drought_tolerant salt_tolerant thorny\n  <dbl> <chr>           <dbl>            <dbl>         <dbl>  <dbl>\n1   425 flowering-maple     0                1             0      1\n2   426 flowering-maple     0                1             0      0\n3   427 flowering-maple     0                1             0      0\n4   428 flowering-maple     0                1             1      0\n5   434 Jacob's coat        0                0             0      0\n```\n:::\n:::\n\n\n## Max number of lines\n\nIf you have a very large file and only want to read in a specified amount of lines it is best to use `n_max=`.\n\nThis is better than piping to `dplyr::slice()` as it saves the computer from needing to read in the whole file to memory (RAM) only to then slice it.\n\nRead in the first 8 lines from [https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv](https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv).\n\n__Note:__ The header line is not considered for `n_max=` therefore the header line and first 8 rows ar read in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_delim(\n    file = \"https://neof-workshops.github.io/Tidyverse/data/all_plant_details.csv\",\n    delim = \",\",\n    n_max = 8) |>\n    #Select the first 6 columns to view\n    dplyr::select(1:6)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 8 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): common_name\ndbl (32): id, seeds, drought_tolerant, salt_tolerant, thorny, invasive, trop...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 6\n     id common_name     seeds drought_tolerant salt_tolerant thorny\n  <dbl> <chr>           <dbl>            <dbl>         <dbl>  <dbl>\n1   425 flowering-maple     0                1             0      1\n2   426 flowering-maple     0                1             0      0\n3   427 flowering-maple     0                1             0      0\n4   428 flowering-maple     0                1             1      0\n5   434 Jacob's coat        0                0             0      0\n6   502 hot water plant     0                0             0      0\n7   540 desert rose         0                1             1      1\n8   543 maidenhair fern     0                0             0      0\n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}