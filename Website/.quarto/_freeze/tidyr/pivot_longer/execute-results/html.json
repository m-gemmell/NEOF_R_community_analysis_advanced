{
  "hash": "115c7fa04c75cb30973f8716e8168358",
  "result": {
    "markdown": "---\ntitle: \"Pivot longer\"\n---\n\n\n<center>\n![](images/tidyr_pivot_longer.png){style=\"width:200px\"}\n</center>\n\nThe function `pivot_longer()` longifys data, converting it from wide to long.\nLong data is generally the preferred format for __Tidyverse__, and is especially useful for [`ggplot2`](/ggplot2/ggplot2.qmd).\n\nWhen data is longified:\n\n- The number of rows increases.\n- The number of columns decreases.\n\nTo longify data a set of columns are chosen.\n\n- The column names are assigned as data of a __names__ column.\n- The values within the columns are assigned to a __value__ column. Each value is within its own row.\n\n[Tidyverse reference page](https://tidyr.tidyverse.org//reference/pivot_longer.html)\n\n## Dataset\n\nFor demonstration we'll load the `fisheries_wide_tbl` data from the [mgrtibbles package](/datasets/mgrtibbles.qmd) (hyperlink includes install instructions).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load package\nlibrary(\"mgrtibbles\")\n#mammal_sleep_tbl tibble for demonstration\nmgrtibbles::fisheries_wide_tbl |>\n    #View first 11 columns with select\n    dplyr::select(1:11)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 264 × 11\n   Entity  `1969` `1970` `1971` `1972` `1973` `1974` `1975` `1976` `1977` `1978`\n   <chr>    <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n 1 Afgha…     400 4   e2 5   e2 5   e2 5   e2 5   e2 6   e2 6   e2 6   e2 6   e2\n 2 Afric… 3078461 2.48e6 2.36e6 2.63e6 2.78e6 2.74e6 2.49e6 2.20e6 2.16e6 2.12e6\n 3 Afric…  850772 9.61e5 1.13e6 1.20e6 1.20e6 1.24e6 1.28e6 1.26e6 1.29e6 1.31e6\n 4 Alban…    7000 8   e3 8   e3 8   e3 8.00e3 8.45e3 8.41e3 8.38e3 8.34e3 8.81e3\n 5 Alger…   23150 2.42e4 2.37e4 2.83e4 3.12e4 3.58e4 3.77e4 3.51e4 4.35e4 3.41e4\n 6 Ameri…       0 0      0      0      1   e2 8.2 e1 1.36e2 1.13e2 2.02e2 1.93e2\n 7 Andor…      NA 0      0      0      0      0      0      0      0      0     \n 8 Angola  425200 3.75e5 3.24e5 6.07e5 4.79e5 4.00e5 1.61e5 8.15e4 1.20e5 1.26e5\n 9 Antig…     800 9   e2 9   e2 1.2 e3 1.5 e3 1.59e3 1.60e3 1.61e3 1.82e3 1.62e3\n10 Arab …  634609 6.88e5 7.05e5 7.53e5 9.21e5 8.99e5 8.64e5 9.34e5 9.05e5 9.10e5\n# ℹ 254 more rows\n```\n:::\n:::\n\n\n## Wide to long\n\nPivot the __wide tibble__ to a __long tibble__.\n\nThe three options provided below are:\n\n- The columns to use for longifying.\n    - Below `!Entity` is used to longify all but the `Entity` column.\n    - String vectors can be used.\n- `names_to=`: New column in long data containing the __names__ of the longified columns.\n- `values_to=`: New column in long data containing the __values__ of the longified columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfisheries_wide_tbl |> tidyr::pivot_longer(!Entity, names_to=\"Year\", values_to = \"Metric_tons\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15,576 × 3\n   Entity      Year  Metric_tons\n   <chr>       <chr>       <dbl>\n 1 Afghanistan 1969          400\n 2 Afghanistan 1970          400\n 3 Afghanistan 1971          500\n 4 Afghanistan 1972          500\n 5 Afghanistan 1973          500\n 6 Afghanistan 1974          500\n 7 Afghanistan 1975          600\n 8 Afghanistan 1976          600\n 9 Afghanistan 1977          600\n10 Afghanistan 1978          600\n# ℹ 15,566 more rows\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}